fix timeout error

go test --race -v -tags=integration ./...
?       github.com/Danny-Dasilva/CycleTLS/cycletls      [no test files]
=== RUN   TestForceHTTP1_h2
--- PASS: TestForceHTTP1_h2 (0.35s)
=== RUN   TestForceHTTP1_h1
--- PASS: TestForceHTTP1_h1 (0.25s)
=== RUN   TestInsecureSkipVerify_true
2025/08/03 14:10:10 Request Failed: Get "https://expired.badssl.com": uTlsConn.Handshake() error: tls: failed to verify certificate: x509: certificate has expired or is not yet valid: current time 2025-08-03T14:10:10-04:00 is after 2015-04-12T23:59:59Z
--- PASS: TestInsecureSkipVerify_true (0.14s)
=== RUN   TestInsecureSkipVerify_false
--- PASS: TestInsecureSkipVerify_false (0.18s)
=== RUN   TestUrlEncodedFormDataUpload
--- PASS: TestUrlEncodedFormDataUpload (0.13s)
=== RUN   TestConnectionReuse
==================
WARNING: DATA RACE
Read at 0x00c0005ba060 by goroutine 115:
  net/http.(*conn).setState()
      /snap/go/10907/src/net/http/server.go:1889 +0x153
  net/http.(*Server).Serve()
      /snap/go/10907/src/net/http/server.go:3453 +0x804
  net/http/httptest.(*Server).goServe.func1()
      /snap/go/10907/src/net/http/httptest/server.go:311 +0xb3

Previous write at 0x00c0005ba060 by goroutine 114:
  github.com/Danny-Dasilva/CycleTLS/cycletls/tests/integration_test.TestConnectionReuse()
      /home/danny/Documents/TLS_SHIT/CycleTLS/cycletls/tests/integration/connection_reuse_test.go:44 +0x27b
  testing.tRunner()
      /snap/go/10907/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /snap/go/10907/src/testing/testing.go:1851 +0x44

Goroutine 115 (running) created at:
  net/http/httptest.(*Server).goServe()
      /snap/go/10907/src/net/http/httptest/server.go:309 +0xa4
  net/http/httptest.(*Server).StartTLS()
      /snap/go/10907/src/net/http/httptest/server.go:185 +0xdc5
  net/http/httptest.NewTLSServer()
      /snap/go/10907/src/net/http/httptest/server.go:192 +0x1c4
  github.com/Danny-Dasilva/CycleTLS/cycletls/tests/integration_test.TestConnectionReuse()
      /home/danny/Documents/TLS_SHIT/CycleTLS/cycletls/tests/integration/connection_reuse_test.go:21 +0xd8
  testing.tRunner()
      /snap/go/10907/src/testing/testing.go:1792 +0x225
  testing.(*T).Run.gowrap1()
      /snap/go/10907/src/testing/testing.go:1851 +0x44

Goroutine 114 (running) created at:
  testing.(*T).Run()
      /snap/go/10907/src/testing/testing.go:1851 +0x8f2
  testing.runTests.func1()
      /snap/go/10907/src/testing/testing.go:2279 +0x85
  testing.tRunner()
      /snap/go/10907/src/testing/testing.go:1792 +0x225
  testing.runTests()
      /snap/go/10907/src/testing/testing.go:2277 +0x96c
  testing.(*M).Run()
      /snap/go/10907/src/testing/testing.go:2142 +0xeea
  main.main()
      _testmain.go:111 +0x164
==================
    connection_reuse_test.go:78: Expected 1-2 handshakes for connection reuse, got 3
    testing.go:1490: race detected during execution of test
--- FAIL: TestConnectionReuse (0.01s)
=== RUN   TestCookieHandling
--- PASS: TestCookieHandling (0.79s)
=== RUN   TestCookies
--- PASS: TestCookies (0.20s)
=== RUN   TestTimeoutSuccess
--- PASS: TestTimeoutSuccess (1.12s)
=== RUN   TestTimeoutError
2025/08/03 14:10:13 Request Failed: Get "http://httpbin.org/delay/10": net/http: request canceled (Client.Timeout exceeded while awaiting headers)
    custom_timeout_test.go:45: Expected 408 Got 0 for Status
--- FAIL: TestTimeoutError (1.00s)
=== RUN   TestDeflateDecoding
    decoding_test.go:26: Deflated not found in Response Body: x�=�1k�0�w�
        ���J�����t�Ц�v) d+�%ۢ�Td������ny߻{wwI�J7�
                                                Z�
        ~�h���J�!�K���!D��~*c��-^Z�w�'�Vۥ�ÝM�˴��;��P�6�%z7v��$�g%���=���ۥyY,@/���M�l��8���l���Z���V��\x
h$�
        R(Q)�0&䜭a���1�z��C��������7��3�SX
                                          ʀ�
                                            '����L3
--- FAIL: TestDeflateDecoding (0.12s)
=== RUN   TestBrotliDecoding
    decoding_test.go:41: brotli not found in Response Body: w�fʜ���E�dӦ��K�
        X{      "��"GUr�
                        �ln�&��cİ����s�6u��Xi �13�ۦ%�Ի���M�P�M&T�-��7�2�=Vڎz9ǎ�c����D�1e        ����̻9���#�p-=���z0�`B����
        ����IX�\3,��0��h �)�k�gm?N��ӹ��4�Wg�%�V+�^A�6\�W&��)��
                                                              ����t�taZS�
--- FAIL: TestBrotliDecoding (0.14s)
=== RUN   TestGZIPDecoding
    decoding_test.go:58: gzipped not found in Response Body: ��h�=�Qk�0���!O�8ʹ��n����V4^5�&�K�����}��9�^��7��{��Y3�-���38vu���[�SBWR5NXsA��s�=�Em��K�|m��v����:��,�b���c:���c���'4%�̣
                                          ��m���g�񫃐2ꆡwi��S���'�_fE�@>�R�Gk�O�����0LE͊�Lk�b*�2)c�.���/`[������6�F6R-���gi�G�_"�ݼբH
--- FAIL: TestGZIPDecoding (0.84s)
=== RUN   TestRedirectEnabled
--- PASS: TestRedirectEnabled (0.42s)
=== RUN   TestRedirectDisabled
--- PASS: TestRedirectDisabled (0.12s)
=== RUN   TestRedirectEnabled_NewURL
--- PASS: TestRedirectEnabled_NewURL (0.40s)
=== RUN   TestRedirectDisabled_NewURL
--- PASS: TestRedirectDisabled_NewURL (0.13s)
=== RUN   TestHTTP3Request
2025/08/03 14:10:16 failed to sufficiently increase receive buffer size (was: 208 kiB, wanted: 2048 kiB, got: 416 kiB). See https://github.com/quic-go/quic-go/wiki/UDP-Buffer-Sizes for details.
--- PASS: TestHTTP3Request (0.08s)
=== RUN   TestHTTP3Transport
--- PASS: TestHTTP3Transport (0.00s)
=== RUN   TestFileWriting
--- FAIL: TestFileWriting (0.09s)
panic: illegal base64 data at input byte 0 [recovered]
        panic: illegal base64 data at input byte 0

goroutine 293 [running]:
testing.tRunner.func1.2({0xea3400, 0x10d5f00})
        /snap/go/10907/src/testing/testing.go:1734 +0x3eb
testing.tRunner.func1()
        /snap/go/10907/src/testing/testing.go:1737 +0x696
panic({0xea3400?, 0x10d5f00?})
        /snap/go/10907/src/runtime/panic.go:792 +0x132
github.com/Danny-Dasilva/CycleTLS/cycletls/tests/integration_test.WriteFile({0xc0009a0000, 0x8b04}, {0xfbc435, 0x21})
        /home/danny/Documents/TLS_SHIT/CycleTLS/cycletls/tests/integration/images_test.go:49 +0x21f
github.com/Danny-Dasilva/CycleTLS/cycletls/tests/integration_test.TestFileWriting(0xc0004e0fc0)
        /home/danny/Documents/TLS_SHIT/CycleTLS/cycletls/tests/integration/images_test.go:103 +0x1d0
testing.tRunner(0xc0004e0fc0, 0xfdd728)
        /snap/go/10907/src/testing/testing.go:1792 +0x226
created by testing.(*T).Run in goroutine 1
        /snap/go/10907/src/testing/testing.go:1851 +0x8f3
FAIL    github.com/Danny-Dasilva/CycleTLS/cycletls/tests/integration    6.558s
=== RUN   TestGenerateJA4
--- PASS: TestGenerateJA4 (0.00s)
=== RUN   TestGenerateJA4H2
--- PASS: TestGenerateJA4H2 (0.00s)
=== RUN   TestParseJA4String
--- PASS: TestParseJA4String (0.00s)
=== RUN   TestJA4StringToSpec
--- PASS: TestJA4StringToSpec (0.00s)
=== RUN   TestValidSpec
--- PASS: TestValidSpec (0.00s)
=== RUN   TestInvalidSpec
--- PASS: TestInvalidSpec (0.00s)
PASS
ok      github.com/Danny-Dasilva/CycleTLS/cycletls/tests/unit   (cached)
FAIL



this repo uses https://github.com/gospider007/requests connection re-use  * [Return whether to reuse  connections](https://github.com/gospider007/requests/blob/master/test/response/isNewConn_test.go), make sure the re-use works the same 





go test --race -v -tags=integration ./tests/integration -run
  "^(?!.*Proxy).*$"


  go test --race -v -tags=integration ./tests/integration -run "Test(ForceHTTP1|InsecureSkipVerify|UrlEncodedFormDataUpload|ConnectionReuse|Cookie|Timeout|DeflateDecoding|BrotliDecoding|GZIPDecoding|Redirect|HTTP3|FileWriting|LatestVersions|HTTP2|MultipartFormData|DelayResponseOrder|SSE|WebSocket|QUICTransportDirect).*"